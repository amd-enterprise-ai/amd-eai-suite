# Copyright Â© Advanced Micro Devices, Inc., or its affiliates.
#
# SPDX-License-Identifier: MIT

[tool.mypy]
python_version = "3.13"
warn_unused_configs = true
ignore_missing_imports = true
strict = false
pretty = true
show_column_numbers = true
no_implicit_optional = false
explicit_package_bases = true
scripts_are_modules = true
check_untyped_defs = false
disallow_incomplete_defs = true

# Override disallow_incomplete_defs for modules not yet fixed
# As we fix modules, remove them from this list
#
# Strategy: Enable disallow_incomplete_defs globally, but disable it for modules
# we haven't fixed yet. As we fix modules in each PR, we remove them from here.

[[tool.mypy.overrides]]
# Test files - will be fixed in PR 2-3
# Note: Keep test files excluded until all are fixed
# Some test files have been fixed but still have incomplete function definitions
module = [
  "tests.*",
  "services.airm.api.tests.*",
]
disallow_incomplete_defs = false

[tool.robocop]

[tool.robocop.lint]
# Enable most rules but ignore some that don't fit your code style
ignore = [
    "COM04",     # Ignore comment formatting (copyright headers)
    "NAME02",    # Allow your current keyword naming style (sentence case)
    "DEPR05",    # Allow Set Variable/Set Test Variable usage
    "DEPR06",    # Allow Create List/Create Dictionary usage
    "VAR01",     # Allow empty variable values
    "VAR05",     # Allow suite-scoped variables
    "VAR06",     # Allow test-scoped variables
    "IMP02",     # Allow current import order
]
# Keep these important ones enabled:
# - LEN08 (line length)
# - VAR02 (unused variables)
# - Logic and syntax errors

[tool.robocop.format]
select = [
  "NormalizeSeparators",
  "NormalizeNewLines",
  "NormalizeSectionHeaderName",
  "OrderSettings",
  "AlignVariablesSection",
  "AlignSettingsSection",
  "AlignTestCasesSection",
  "AlignKeywordsSection",
]
line_length = 120

[tool.ruff]
target-version = "py313"
line-length = 120

[tool.ruff.lint]
ignore = [
  "F841",  # Local variable assigned but never used
]
extend-select = ["F401", "I", "UP"]
extend-safe-fixes = [
  "UP006", # https://docs.astral.sh/ruff/rules/non-pep585-annotation/#fix-safety; we are using Python 3.13 and no libraries that rely on runtime type annotations
  "UP007", # https://docs.astral.sh/ruff/rules/non-pep604-annotation-union/#fix-safety; we are using Python 3.13 and no libraries that rely on runtime type annotations, there are no types that do not support `|` operator either
  "UP008", # https://docs.astral.sh/ruff/rules/super-call-with-parameters/#fix-safety; we don't have comments on these lines
  "UP035", # https://docs.astral.sh/ruff/rules/deprecated-import/#why-is-this-bad; we don't use typing_extensions
]

[tool.ruff.lint.isort]
known-first-party = ["app", "airm", "workloads_manager"]
